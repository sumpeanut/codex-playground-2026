<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>WebGPU CA + Structural Bonds + Relaxation</title>
    <style>
      html, body { margin: 0; height: 100%; background: #111; color: #ddd; font-family: system-ui, sans-serif; }
      #ui { position: fixed; left: 12px; top: 12px; background: rgba(0,0,0,.55); padding: 10px 12px; border-radius: 10px; }
      canvas { width: 100vw; height: 100vh; display: block; image-rendering: pixelated; }
      #overlay { position: fixed; inset: 0; pointer-events: none; }
      .row { display: flex; gap: 8px; align-items: center; margin-top: 6px; }
      input[type="range"] { width: 220px; }
      button { cursor: pointer; }
      kbd { background: #222; padding: 1px 6px; border-radius: 6px; border: 1px solid #333; }
      .small { font-size: 12px; opacity: .85; margin-top: 8px; line-height: 1.35; }
    </style>
  </head>
  <body>
    <div id="ui">
      <div><b>CA + bonds + relaxation</b></div>

      <div class="row">
        <span>Brush</span>
        <input id="radius" type="range" min="2" max="40" value="14" />
        <span id="radiusVal"></span>
      </div>

      <div class="row">
        <span>Damage</span>
        <input id="damage" type="range" min="1" max="255" value="80" />
        <span id="damageVal"></span>
      </div>

      <div class="row">
        <span>Bond weaken</span>
        <input id="bondWeaken" type="range" min="0" max="255" value="70" />
        <span id="bondWeakenVal"></span>
      </div>

      <div class="row">
        <span>Relax iters</span>
        <input id="relaxIters" type="range" min="0" max="12" value="6" />
        <span id="relaxItersVal"></span>
      </div>

      <div class="row">
        <button id="reset">Reset</button>
        <span>Hold <kbd>Shift</kbd> to repair</span>
      </div>

      <div class="row">
        <label><input id="showQuadTree" type="checkbox" /> Show QuadTree overlay</label>
      </div>

      <div class="row">
        <button id="spawnEntity">Spawn Entity</button>
        <span>Entities: <span id="entityCount">0</span></span>
      </div>

      <div class="small">
        Left-drag: damage cells + weaken nearby bonds.<br/>
        Shift+drag: repair cells + strengthen bonds.<br/>
        <b>Ctrl+click</b>: Select/move entities.<br/>
        Strong bonds resist tearing; relaxation improves stacking/settling.
      </div>
    </div>

    <canvas id="c"></canvas>
    <canvas id="overlay"></canvas>
    <script type="module" src="./main.js"></script>
  </body>
</html>
